<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>用户监控页</title>
    <link rel="icon" href="img/logo-ico.png" type="image/png">
    <link href="css/common/bootstrap.min.css" rel="stylesheet">
    <link href="font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="css/plugins/jqDataTables/jquery.dataTables.css" rel="stylesheet">
    <link href="css/plugins/jqDataTables/extensions/buttons/buttons.dataTables.css" rel="stylesheet">
    <link href="css/common/model-mask.css" rel="stylesheet">

    <link href="css/comstyle.css" rel="stylesheet">
    <script src="js/common/jquery-2.1.1.js"></script>
    <script src="js/common/bootstrap.min.js"></script>
    <script src="js/common/jquery.cookie.js"></script>
    <script src="js/common/vue.js"></script>
    <script src="js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
    <script src="js/plugins/jqDataTables/jquery.dataTables.js"></script>
    <script src="js/plugins/jqDataTables/extensions/buttons/dataTables.buttons.js"></script>
    <script src="js/plugins/jqDataTables/extensions/buttons/buttons.print.js"></script>
    <script src="js/plugins/jqDataTables/extensions/buttons/pdfmake.js"></script>
    <script src="js/plugins/jqDataTables/extensions/buttons/vfs_fonts.js"></script>
    <script src="js/plugins/jqDataTables/extensions/buttons/buttons.html5.js"></script>
    <script src="js/plugins/echarts2/echarts.js"></script>
    <!--<script src="js/plugins/chart/Chart.min.js"></script>-->

</head>

<body>
<div id="wrapper">
    <nav class="navbar-default navbar-static-side" role="navigation" id="v-navModel">
        <div class="sidebar-collapse">
            <ul class="nav metismenu" id="side-menu">
                <li class="nav-header">
                    <img id="logo-img-bar" hidefocus="true" v-bind:src="logoPath" >
                </li>
                <li v-bind:class="{'active':item.isActive}" v-for="item in menuList" >
                    <a href="#" v-on:click="goto(item.pageurl,id)">
                        <i class="fa fa-th-large"></i>
                        <span class="nav-label"
                              v-text="item.text"></span>
                        <span class="fa" v-bind:class="{'arrow':item.showChild}"></span></a>
                    <ul class="nav nav-second-level" v-if="item.showChild">
                        <li v-bind:class="{'active':cItem.isActive}" v-for="cItem in item.childMenu"><a
                                v-on:click="goto(cItem.pageurl,id)" v-text="cItem.text"></a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </nav>

    <div id="page-wrapper" class="gray-bg">
        <div class="row border-bottom" id="v-userModel">
            <nav class="navbar navbar-static-top white-bg" role="navigation" style="margin-bottom: 0">
                <div class="navbar-header">
                    <a class="navbar-minimalize minimalize-styl-2 btn btn-primary"><i
                            class="fa fa-bars"></i> </a>
                </div>

                <ul class="nav navbar-top-links navbar-right font-14">
                    <!--<li style="margin-right:40px;">-->
                    <!--<input onkeypress="searchBarPress(event,this.value)" type="text" placeholder="请输入查询条件 . . . "-->
                    <!--class="form-control" id="top-search">-->
                    <!--</li>-->
                    <li class="welcome-message">
                        <span class="m-r text-muted f-l">
                            <strong class="font-bold m-r">欢迎你</strong>
                            <span v-text="uname" style="color:green"></span>
                            <strong class="font-bold">，</strong>
                        </span>
                        <span class="text-muted text-xs m-r-lg f-l m-l">
                            <strong class="font-bold">当前积分：</strong>
                            <span v-text="uscore" style="color:orangered"></span>
                            <strong class="font-bold">分</strong>
                        </span>
                    </li>
                    <li>
                        <a onclick="loginOut()"><i class="fa fa-sign-out"></i>Log out</a>
                    </li>
                </ul>
            </nav>
        </div>
        <div class="wrapper wrapper-content" id="v-userMonitorModel">
            <div class="row">
                <!--投资关系导力图-->
                <div class="col-lg-7">
                    <div class="ibox float-e-margins">
                        <div class="ibox-title">
                            <h5>用户监控</h5>
                            <div class="ibox-tools">
                                <select style="font-size:14px;padding:2px;width:350px;" onchange="changeMonitorSelection()" v-model="currentMonitorSelect" id="currentMonitorSelect">
                                    <option v-for="item in monitorList" value="{{item.index}}" v-text="item|monitorSelectionFilter"></option>
                                </select>
                                <a class="collapse-link">
                                    <i class="fa fa-chevron-up"></i>
                                </a>
                            </div>
                        </div>
                        <div class="ibox-content">
                            <div class="row">
                                <div class="col-lg-12">
                                    <div id="inventForceChart"></div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <!--联动表-->
                <div class="col-lg-5">
                    <!--变更信息，法务，经营异常，股权质押，动产抵押   企业监控-->
                    <div class="row" v-show="checkShowFilter(1)">
                        <!--融资情况-->
                        <div class="col-lg-12">
                            <div class="ibox float-e-margins">
                                <div class="ibox-title">
                                    <h5>融资情况</h5>
                                    <div class="ibox-tools">
                                        <a class="pull-right collapse-link">
                                            <i class="fa fa-chevron-up"></i>
                                        </a>
                                    </div>
                                </div>
                                <div class="ibox-content">
                                    <div class="table-responsive" style="display:none;" v-show="entInvestFinanceList|checkEmptyFilter">
                                        <div style="font-weight: bold">投资情况</div>
                                        <table class="table table-striped table-bordered table-hover" id="entInvest_table">
                                            <thead>
                                            <tr>
                                                <th>轮次</th>
                                                <th>标题</th>
                                                <th>机构名</th>
                                                <!--<th>金额</th>-->
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr v-for="item in entInvestFinanceList">
                                                <td v-text="item.investType|formatStringFilter"></td>
                                                <td v-text="item.eventTitle"></td>
                                                <td v-text="item.orgCnName"></td>
                                                <!--<td v-text="item.amount"></td>-->
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    <div class="table-responsive" style="display:none;" v-show="entExitFinanceList|checkEmptyFilter">
                                        <div style="font-weight: bold">退出情况</div>
                                        <table class="table table-striped table-bordered table-hover" id="entExit_table">
                                            <thead>
                                            <tr>
                                                <th>类型</th>
                                                <th>标题</th>
                                                <th>机构名</th>
                                                <!--<th>金额</th>-->
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr v-for="item in entExitFinanceList">
                                                <td v-text="item.investType|formatStringFilter"></td>
                                                <td v-text="item.eventTitle"></td>
                                                <td v-text="item.orgCnName"></td>
                                                <!--<td v-text="item.amount"></td>-->
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--变更信息-->
                        <div class="col-lg-12">
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="ibox float-e-margins">
                                        <div class="ibox-title">
                                            <h5>最新企业变更信息</h5>
                                            <div class="ibox-tools">
                                                <a class="collapse-link">
                                                    <i class="fa fa-chevron-up"></i>
                                                </a>
                                            </div>
                                        </div>
                                        <div class="ibox-content">
                                            <div class="table-responsive" style="display:none;" v-show="changeList|checkEmptyFilter">
                                                <table class="table table-striped table-bordered table-hover" id="change_table">
                                                    <thead>
                                                    <tr>
                                                        <th class="td-W100">变更时间</th>
                                                        <th class="td-W180">项目</th>
                                                        <th>变更前</th>
                                                        <th>变更后</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr class="pointer-cursor" v-for="item in changeList" v-on:click="showChangeDetail(item)">
                                                        <td class="text-center td-W100" v-text="item.changeDate"></td>
                                                        <td class="td-W180" v-text="item.changeItem"></td>
                                                        <td v-text="item.beforeContent|strFormatShortFilter"></td>
                                                        <td v-text="item.afterContent|strFormatShortFilter"></td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--法务-->
                        <div class="col-lg-12">
                            <div class="ibox float-e-margins">
                                <div class="ibox-title">
                                    <h5>最新法院判决信息</h5>
                                    <div class="ibox-tools">
                                        <a class="pull-right collapse-link">
                                            <i class="fa fa-chevron-up"></i>
                                        </a>
                                    </div>
                                </div>
                                <div class="ibox-content">
                                    <div class="table-responsive" style="display:none;" v-show="entLawList|checkEmptyFilter">
                                        <table class="table table-striped table-bordered table-hover" id="law_table">
                                            <thead>
                                            <tr>
                                                <th>法院裁判文书案号</th>
                                                <th>法院裁判文书发布日期</th>
                                                <th>法院裁判文书标题</th>
                                                <th>法院裁判文书类型</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr v-for="item in entLawList">
                                                <td v-text="item.caseNo"></td>
                                                <td v-text="item.date"></td>
                                                <td v-text="item.title"></td>
                                                <td v-text="item.type"></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--经营异常-->
                        <div class="col-lg-12">
                            <div class="ibox float-e-margins">
                                <div class="ibox-title">
                                    <h5>最新经营异常信息</h5>
                                    <div class="ibox-tools">
                                        <a class="pull-right collapse-link">
                                            <i class="fa fa-chevron-up"></i>
                                        </a>
                                    </div>
                                </div>
                                <div class="ibox-content">
                                    <div class="table-responsive"  style="display:none;" v-show="abnormalItemList|checkEmptyFilter">
                                        <table class="table table-striped table-bordered table-hover" id="abnormal_table">
                                            <thead>
                                            <tr>
                                                <th>作出决定机关</th>
                                                <th>列入时间</th>
                                                <th>列入原因</th>
                                                <th>移出时间</th>
                                                <th>移出原因</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr v-for="item in abnormalItemList">
                                                <td v-text="item.dept"></td>
                                                <td v-text="item.inDate"></td>
                                                <td v-text="item.inReason"></td>
                                                <td v-text="item.outDate"></td>
                                                <td v-text="item.outReason"></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--股权质押-->
                        <div class="col-lg-12">
                            <div class="ibox float-e-margins">
                                <div class="ibox-title">
                                    <h5>最新股权质押信息</h5>
                                    <div class="ibox-tools">
                                        <a class="pull-right collapse-link">
                                            <i class="fa fa-chevron-up"></i>
                                        </a>
                                    </div>
                                </div>
                                <div class="ibox-content">
                                    <div class="table-responsive"  style="display:none;" v-show="equityList|checkEmptyFilter">
                                        <table class="table table-striped table-bordered table-hover" id="equity_table">
                                            <thead>
                                            <tr>
                                                <th>登记日期</th>
                                                <!-- <th>登记编号</th>-->
                                                <th>质权人</th>
                                                <th>出质股权数</th>
                                                <!--<th>出质人证件号码</th>-->
                                                <th>质权公司</th>
                                                <!-- <th>质权人证件号码</th>-->
                                                <th>股权出质状态</th>
                                                <th>备注</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr v-for="item in equityList">
                                                <td v-text="item.date"></td>
                                                <!-- <td v-text="item.number"></td>-->
                                                <td v-text="item.pdg"></td>
                                                <td v-text="item.pdgAmount"></td>
                                                <!-- <td v-text="item.pdgIdentifyNo"></td>-->
                                                <td v-text="item.pw"></td>
                                                <!--<td v-text="item.pwIdNo"></td>-->
                                                <td v-text="item.status"></td>
                                                <td v-text="item.remark"></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--动产抵押-->
                        <div class="col-lg-12">
                            <div class="ibox float-e-margins">
                                <div class="ibox-title">
                                    <h5>最新动产抵押信息</h5>
                                    <div class="ibox-tools">
                                        <a class="pull-right collapse-link">
                                            <i class="fa fa-chevron-up"></i>
                                        </a>
                                    </div>
                                </div>
                                <div class="ibox-content">
                                    <div class="table-responsive" style="display:none;" v-show="mortgagesList|checkEmptyFilter">
                                        <table class="table table-striped table-bordered table-hover" id="mortgages_table">
                                            <thead>
                                            <tr>
                                                <th>登记日期</th>
                                                <th>登记机关</th>
                                                <th>登记编号</th>
                                                <th>被担保债权种类</th>
                                                <th>备注</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr v-for="item in mortgagesList">
                                                <td v-text="item.date"></td>
                                                <td v-text="item.department"></td>
                                                <td v-text="item.number"></td>
                                                <td v-text="item.type"></td>
                                                <td v-text="item.remarks"></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--机构投资事件    机构监控-->
                    <div class="row" v-show="checkShowFilter(2)">
                        <!--投资事件-->
                        <div class="col-lg-12">
                            <div class="ibox float-e-margins">
                                <div class="ibox-title">
                                    <h5>机构投资事件</h5>
                                    <div class="ibox-tools">
                                        <a class="collapse-link">
                                            <i class="fa fa-chevron-up"></i>
                                        </a>
                                    </div>
                                </div>
                                <div class="ibox-content">
                                    <div class="table-responsive" style="display:none;" v-show="orgInvestList|checkEmptyFilter">
                                        <table class="table table-striped table-bordered table-hover" id="orgInvest_table">
                                            <thead>
                                            <tr>
                                                <th>事件</th>
                                                <th>名称</th>
                                                <th>类型</th>
                                                <th>经办人</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr v-for="item in orgInvestList">
                                                <td v-text="item.eventTitle"></td>
                                                <td v-text="item.entCnName"></td>
                                                <td v-text="item.investType"></td>
                                                <td v-text="item.userName|formatStringFilter"></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--关联族谱-->
                        <div class="col-lg-12">
                            <div class="ibox float-e-margins">
                                <div class="ibox-title">
                                    <h5>机构关联族谱</h5>
                                    <div class="ibox-tools">
                                        <a class="collapse-link">
                                            <i class="fa fa-chevron-up"></i>
                                        </a>
                                    </div>
                                </div>
                                <div class="ibox-content">
                                    <div class="table-responsive" style="display:none;" v-show="orgFamilyList|checkEmptyFilter">
                                        <table class="table table-striped table-bordered table-hover" id="orgFamily_table">
                                            <thead>
                                            <tr>
                                                <th>名称</th>
                                                <th>简称</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr v-for="item in orgFamilyList">
                                                <td v-text="item.orgEntity" class="pointer-cursor" v-on:click="gotoCompany(item.uuid)"></td>
                                                <td v-text="item.orgCnShort"></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--企业投资企业 机构监控*********企业-->
                    <div class="row" v-show="checkShowFilter(3)">
                        <div class="col-lg-12">
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="ibox float-e-margins">
                                        <div class="ibox-title">
                                            <h5>投资企业</h5>
                                            <div class="ibox-tools">
                                                <a class="collapse-link">
                                                    <i class="fa fa-chevron-up"></i>
                                                </a>
                                            </div>
                                        </div>
                                        <div class="ibox-content">
                                            <div class="table-responsive" style="display:none;" v-show="investCompany|checkEmptyFilter">
                                                <table class="table table-striped table-bordered table-hover" id="invest_table">
                                                    <thead>
                                                    <tr>
                                                        <th class="td-W100">投资时间</th>
                                                        <th>企业名</th>
                                                        <th class="td-W180">法人</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr v-for="item in investCompany">
                                                        <td class="text-center td-W100" v-text="item.sDate"></td>
                                                        <td class="pointer-cursor" v-text="item.name" v-on:click="gotoCompany(item.iUuid)"></td>
                                                        <td class="td-W180" v-text="item.legal"></td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
<!-- 信息提示框*******************info-->
<script type="x/template" id="modal-template">
    <div class="modal-mask" v-show="show" transition="modal">
        <div class="modal-wrapper">
            <div class="modal-container">
                <div class="modal-header">
                    <slot name="header">
                        default header
                    </slot>
                </div>
                <div class="modal-body">
                    <slot name="body">
                        default body
                    </slot>
                </div>
                <div class="modal-footer">
                    <slot name="footer">
                        <!--default footer-->
                        <button class="modal-default-button"
                                @click="show = false">
                            确定
                        </button>
                    </slot>
                </div>
            </div>
        </div>
    </div>
</script>
<!-- 信息提示框 模态框 -->
<div id="v-model-mask-info">
    <modal_mask :show.sync="showModal">
        <h3 slot="header" v-text="header"></h3>

        <p slot="body" v-text="information"></p>
    </modal_mask>
</div>

<!--企业变更详情*******************changeInfo-->
<script type="x/template" id="change-info-template">
    <div class="modal-template-mask ibox" v-show="show" transition="modal">
        <div class="modal-template-wrapper">
            <div class="modal-template-container">
                <div class="pull-right" style="margin-right:3px;">
                    <i class="fa fa-close" @click="show = false"></i>
                </div>
                <div class="modal-template-header">
                    <div class="form-group-m" style="overflow:hidden;">
                        <div>
                            <div style="margin-right:50px;float:left;">
                                <label style="font-size:16px;font-weight: 600;margin-right:5px;color:rgba(100,100,100,0.8);">变更时间:</label>
                                <slot name="change_date"></slot>
                            </div>
                            <div style="float:left;">
                                <label style="font-size:16px;font-weight: 600;margin-right:5px;color:rgba(100,100,100,0.8);">项目:</label>
                                <slot name="change_item"></slot>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-template-body">
                    <div class="hr-line-title" style="font-size:16px;font-weight: 600;">变更前</div>
                    <div class="form-group-m">
                        <div class="row">
                            <slot name="change_before"></slot>
                        </div>
                    </div>
                    <div class="hr-line-title" style="font-size:16px;font-weight: 600;">变更后</div>
                    <div class="form-group-m">
                        <div class="row">
                            <slot name="change_after"></slot>
                        </div>
                    </div>
                </div>
                <div class="modal-template-footer"></div>
            </div>
        </div>
    </div>
    </div>
</script>
<!-- 信息提示框 模态框 -->
<div id="v-change-info-modal">
    <change_info_modal :show.sync="showModal">
        <span slot="change_date" v-text="changeInfo.changeDate"></span>
        <span slot="change_item" v-text="changeInfo.changeItem"></span>
        <div class="col-lg-12" slot="change_before" v-text="changeInfo.beforeContent"></div>
        <div class="col-lg-12" slot="change_after" v-text="changeInfo.afterContent"></div>
    </change_info_modal>
</div>

<!-- Mainly scripts -->
<script src="js/mycommon/common.data.js"></script>
<script src="data/menu/menu.userMonitor.js"></script>
<script src="data/charts/monitor.chart.data.js"></script>
<script src="js/mycommon/function.common.js"></script>
<script src="js/mycommon/menu.common.js"></script>
<script src="js/mycommon/ibox.function.js"></script>
<script src="js/mycommon/mask.info.js"></script>

<script src="js/business/userMonitor.js"></script>

</body>
</html>
